webpackJsonp([12],{"+W/b":function(t,s,n){"use strict";var o=function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"content"},[n("div",{staticClass:"sounds"},[t._l(t.soundNames,function(s){return n("div",{staticClass:"sound"},[n("div",{staticClass:"button",domProps:{innerHTML:t._s(t.soundButtonLabels[s])},on:{mousedown:function(n){return t.onSound(s)}}}),n("div",{staticClass:"name"},[t._v(t._s(s))])])}),n("div",{staticClass:"sound"},[n("div",{staticClass:"button",class:{disabled:!t.customValid},domProps:{innerHTML:t._s(t.customButtonLabel)},on:{mousedown:function(s){return t.onSound("custom")}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.customSound,expression:"customSound"}],staticClass:"custom",class:{invalid:!t.customValid},domProps:{value:t.customSound},on:{keydown:[function(t){t.stopPropagation()},function(s){return!s.type.indexOf("key")&&t._k(s.keyCode,"enter",13,s.key,"Enter")?null:t.onSound("custom")},function(s){return!s.type.indexOf("key")&&t._k(s.keyCode,"esc",27,s.key,["Esc","Escape"])?null:s.target.blur()}],input:function(s){s.target.composing||(t.customSound=s.target.value)}}})]),t.active.length?n("div",{staticClass:"active"},[t._v(t._s(t.active.join(",")))]):t._e()],2),n("div",{staticClass:"sequences"},t._l(t.fx,function(s,o){return n("div",{staticClass:"sequence"},[n("div",{staticClass:"button",on:{click:function(n){return t.onEffect(s)}}},[t._v(t._s(t.percussionMode?o:"Â "))]),n("div",{staticClass:"name"},[t._v(t._s(s))])])}),0)])};o._withStripped=!0;var e={render:o,staticRenderFns:[]};s.a=e},"0QXT":function(t,s,n){"use strict";(function(t){var o=n("cqmd"),e=n("sHzt"),i=["q","2","w","3","e","r","5","t","6","y","7","u","i","9","o","0","p","[","=","]","a","z","s","x","c","f","v","g","b","n","j","m","k",",","l",".","/"];s.a={head:{title:"Flat Thirteen | Sound"},layout:"debug",constants:{soundNames:["kick","snare","click","cowbell","chords"],keyLookup:t.zipObject(i,t.range(i.length))},data:function(){return{customSound:"fatsquare5",customState:"valid",lastSound:null,lastSoundName:null,activeSounds:{},active:[],octaveShift:0,trySound:t.debounce(this._trySound,500)}},mounted:function(){window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp)},destroyed:function(){window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp)},methods:{onKeyDown:function(s){if(this.percussionMode)this.lastSoundName={q:"kick",a:"snare",z:"click"}[s.key],this.lastSound=o.a[this.lastSoundName],this.lastSound?this.lastSound.play():this.fx[s.key]&&this.onEffect(this.fx[s.key]),"ArrowDown"===s.key&&this.onSound("cowbell",!1);else{var n=this.getPitch(s.key);n&&!this.activeSounds[n]?(this.activeSounds[n]=!0,this.active=t.keys(this.activeSounds),this.lastSound.attack({pitch:n})):"Shift"===s.key&&(1===s.location&&this.octaveShift>-3?(this.releaseAll(-1),this.octaveShift--):2===s.location&&this.octaveShift<3&&(this.releaseAll(1),this.octaveShift++)),"ArrowDown"===s.key?"cowbell"===this.lastSoundName?this.onSound("chords",!1):"chords"===this.lastSoundName&&this.onSound("custom",!1):"ArrowUp"===s.key&&("custom"===this.lastSoundName?this.onSound("chords",!1):"chords"===this.lastSoundName?this.onSound("cowbell",!1):this.onSound("snare",!1))}},onKeyUp:function(s){var n=this.getPitch(s.key);this.lastSound&&this.lastSound.release&&n&&(delete this.activeSounds[n],this.active=t.keys(this.activeSounds),this.lastSound.release({pitch:n}))},getPitch:function(t){return e.a.pitch("C"+(3+this.octaveShift),this.keyLookup[t])},_trySound:function(t){var s="play"===this.customState;this.customState=o.a.set("custom",t)?"valid":"invalid",s&&this.onSound("custom")},onSound:function(t){var s=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];o.a.resume().then(function(){s.lastSoundName=t,s.lastSound&&(s.releaseAll(),s.octaveShift=0),s.lastSound=o.a.get(t),n&&("custom"!==t||s.customValid?s.lastSound?s.lastSound.play():console.log("Play "+t+" not supported"):"invalid"===s.customState?s.active=["Invalid custom sound"]:s.customState="play")})},releaseAll:function(s){var n=this,o={};this.lastSound&&t.forEach(this.active,function(t){n.lastSound.release({pitch:t}),s&&(t=e.a.pitch(t,12*s),o[t]=!0,n.lastSound.attack({pitch:t}))}),this.activeSounds=o,this.active=t.keys(this.activeSounds)},onEffect:function(t){o.a.effect(t),this.lastSound=null,this.lastSoundName=null}},computed:{fx:function(){return t.keys(o.a.FX)},percussionMode:function(){return!this.lastSound||!this.lastSound.attack},soundButtonLabels:function(){return{kick:this.percussionMode?"q":"&nbsp;",snare:this.percussionMode?"a":"&nbsp;",click:this.percussionMode?"z":"&nbsp;",cowbell:"cowbell"===this.lastSoundName?this.octaveShift:"&nbsp;",chords:"chords"===this.lastSoundName?this.octaveShift:"&nbsp;"}},customButtonLabel:function(){return"custom"===this.lastSoundName&&this.customValid?this.octaveShift:"&nbsp;"},customValid:function(){return"valid"===this.customState}},watch:{customSound:{immediate:!0,handler:function(t){this.customState="",this.trySound(t)}}}}}).call(s,n("M4fF"))},JgPk:function(t,s,n){var o=n("c0Yr");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);n("rjj0")("d49e37ec",o,!1,{sourceMap:!1})},c0Yr:function(t,s,n){(s=t.exports=n("FZ+f")(!1)).push([t.i,"@import url(https://fonts.googleapis.com/css?family=PT+Mono);",""]),s.push([t.i,"h3[data-v-239d1634]{line-height:10.5vh;margin:10px 0}.content[data-v-239d1634]{display:-webkit-box;display:-ms-flexbox;display:flex;margin:60px 20px 10px}.name[data-v-239d1634]{display:inline-block;font-size:5vw;margin-right:4vw}.custom[data-v-239d1634]{font-size:5vw;width:30vw;border:none}.custom.invalid[data-v-239d1634]{opacity:.5}.custom[data-v-239d1634]:focus{outline:none}.button[data-v-239d1634]{background-color:#008fff;vertical-align:baseline}.sound .button[data-v-239d1634]{border-radius:50%;padding:1.5vh;height:7.5vh;width:7.5vh;margin:1.5vh;font-size:6vh;line-height:7.5vh}.sequences[data-v-239d1634]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-flow:column wrap;flex-flow:column wrap;-webkit-box-flex:2;-ms-flex:2;flex:2}.sequence .button[data-v-239d1634]{border-radius:10px;font-size:4.5vh;margin:10px;padding:.75vh 3vh}",""])},tHdx:function(t,s,n){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var o=n("0QXT"),e=n("+W/b"),i=!1;var a=function(t){i||n("JgPk")},u=n("VU/8")(o.a,e.a,!1,a,"data-v-239d1634",null);u.options.__file="pages/sound.vue",s.default=u.exports}});